<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="UTF-8" />
    <title>Gitlab Deployment Information</title>
    <link rel="stylesheet" href="libs/awesomplete/awesomplete.min.css" />
    <link rel="stylesheet" href="libs/toastify/toastify.min.css" />
    <link rel="stylesheet" href="libs/pico-css/pico.sand.min.css" />
    <link rel="stylesheet" href="popup.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body style="height: 100%">
    <main
      class="container"
      style="width: 100%; padding: 0; height: 100%; overflow: hidden"
    >
      <article style="margin: 0; height: 100%">
        <h4 class="title" id="title">
          Deployment Information
          <div id="loader" style="display: none">
            <i class="fa-solid fa-spinner rotating"></i>
          </div>
        </h4>
        <details id="gitlabToken" name="gitlab-token">
          <summary>Gitlab Token (optional)</summary>
          <input type="password" id="tokenInput" />
          <br />
          <fieldset class="show-password">
            <label>
              <input
                id="revealPassword"
                name="reveal-password"
                type="checkbox"
                role="switch"
              />
              Show token
            </label>
          </fieldset>
          <br />
          <button class="secondary" id="saveTokenBtn" style="width: 100%">
            Save Token
          </button>
          <hr />
        </details>
        <form id="formData">
          <input
            id="dateTime"
            type="datetime-local"
            name="datetime-local"
            aria-label="Datetime local"
            aria-describedby="date-time-helper"
            required
          />
          <small id="date-time-helper">Deployment Time</small>
          <br />
          <fieldset style="margin-bottom: 0">
            <label>
              Pipeline ID
              <input
                placeholder="Pipeline"
                type="text"
                id="pipeline"
                required
              />
            </label>
          </fieldset>
          <fieldset style="margin-bottom: 0">
            <label>
              Source Tag
              <input
                placeholder="Source Tag"
                class="awesomplete"
                type="text"
                id="fromTag"
                required
              />
            </label>
          </fieldset>
          <fieldset style="margin-bottom: 0">
            <label>
              Target Tag
              <input
                placeholder="Target Tag"
                class="awesomplete"
                type="text"
                id="toTag"
                required
              />
            </label>
          </fieldset>
          <button id="generateBtn" class="btn" type="submit">
            <i class="fa-solid fa-gear"></i>
            Generate Info
          </button>
        </form>
        <div id="output" style="margin-top: 10px; margin-bottom: 10px"></div>
        <div id="copyButton">
          <button class="btn" id="copyMD">
            <i class="fa-brands fa-markdown"></i>
            Copy Markdown
          </button>
          <button class="btn" id="copyChanges">
            <i class="fa-solid fa-code-compare"></i>
            Copy Changelogs
          </button>
          <button class="btn" id="fillReleaseBtn">
            <i class="fa-brands fa-gitlab"></i>
            Fill Gitlab Release Notes
          </button>
          <button class="btn" id="summarizeBtn">
            <i class="fa-solid fa-wand-magic-sparkles"></i>
            AI Summary
          </button>
        </div>
      </article>

      <dialog id="aiSummaryModal">
        <article>
          <header>
            <button aria-label="Close" rel="prev" id="closeSummaryModal"></button>
            <p>
              <strong>
                <i class="fa-solid fa-sparkles"></i> AI Summary
              </strong>
            </p>
            <small id="aiMethod" style="color: #666; font-style: italic;"></small>
          </header>
          <p id="summaryText" style="line-height: 1.6; white-space: pre-wrap;"></p>
          <footer>
            <button id="copySummaryBtn" class="secondary">
              <i class="fa-solid fa-copy"></i>
              Copy Summary
            </button>
          </footer>
        </article>
      </dialog>
    </main>
    <script type="module" src="popup.js"></script>
    <script src="libs/awesomplete/awesomplete.min.js" defer></script>
    <script src="libs/toastify/toastify.min.js" defer></script>
  </body>
</html>
